package modele.joueurs;
import controleur.Partie;
import modele.cartes.Carte;
import modele.cartes.Pioche;
import modele.cartes.Tas;
/**
 * Classe représentant un joueur réel (hérite de joueur) {@link Joueur}
 */
public class JoueurReel extends Joueur {
	/**
	 * constructeur de la classe 
	 * @param nom le pseudo du joueur
	 * @param partie la partie en cours
	 */
	public JoueurReel(String nom, Partie partie){
		super(partie);
		this.setPseudo(nom);
		
	}
	
	/**
	 * méthode qui fait piocher le joueur dans le tas de la partie {@link Tas}
	 * 
	 * @param a le tas dans lequel pioche le joueur
	 */
	public void piocherDansTas(Tas a) {// prend carte du haut du tas, attribue à la carte sa place dans la main
		Carte c = a.retirerCarteDuHaut();
		this.main.getOffre().add(c);
	}

	/**
	 * méthode qui fait piocher le joueur dans la pioche de la partie {@link Pioche}
	 * 
	 * @param p la pioche dans laquelle pioche le joueur
	 */
	public void piocherDansPioche(Pioche p) {
		Carte c = p.retirerCarteDuHaut();
		this.main.getOffre().add(c);
	}

	/**
	 * méthode qui rend une des deux cartes du joueur visible
	 * 
	 * @param premiereCarte booléen qui permet de déterminer quelle carte est rendue
	 *                      visible
	 */
	public void faireOffre(boolean premiereCarte) {
		if (premiereCarte == true) {
			this.main.getOffre().get(0).setVisibilite(true);
		} else {
			this.main.getOffre().get(1).setVisibilite(true);
		}
	}

	/**
	 * méthode qui permet à un joueur de piocher dans l'offre d'un autre joueur
	 * 
	 * @param a            le joueur qui est pioché
	 * @param carteVisible booléen qui détermine si le joueur pioche la carte
	 *                     visible ou face cachée
	 * @return la carte correspondant à la carte piochée
	 */
	public Carte piocherOffre(Joueur a, boolean carteVisible) {

		Carte cartePiochee = null;
		if (a.main.getPiochabilite() == true) {
			if ((carteVisible == true && a.main.getOffre().get(0).getVisibilite() == true)
					|| (carteVisible == false && a.main.getOffre().get(0).getVisibilite() == false)) {
				this.jest.getCartes().add(a.main.getOffre().get(0));
				cartePiochee = a.getMain().getOffre().get(0);
				a.main.getOffre().remove(0);
			} else {
				this.jest.getCartes().add(a.main.getOffre().get(1));
				cartePiochee = a.getMain().getOffre().get(1);
				a.main.getOffre().remove(1);
			}
			a.main.setPiochabilite(false);
		}
		this.estJouable = false;
		return cartePiochee;
	}
	
}

